<section class="faq-section" id="faq">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">{{ faq.page_config.title }}</h2>
            <p class="section-subtitle">{{ faq.page_config.subtitle }}</p>
        </div>
        
        {% if faq.component_settings.show_search %}
        <div class="faq-search">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="faq-search" placeholder="Search FAQ..." aria-label="Search frequently asked questions">
            </div>
        </div>
        {% endif %}
        
        {% if faq.component_settings.show_categories %}
        <div class="faq-categories">
            <button class="category-filter active" data-category="all">All Questions</button>
            {% for category_key, category_data in faq.faqs.items() %}
            <button class="category-filter" data-category="{{ category_key }}">
                <i class="fas {{ category_data.icon }}"></i>
                {{ category_data.category }}
            </button>
            {% endfor %}
        </div>
        {% endif %}
        
        <div class="faq-container">
            {% for category_key, category_data in faq.faqs.items() %}
            <div class="faq-category" data-category="{{ category_key }}">
                <h3 class="category-title">
                    <i class="fas {{ category_data.icon }}"></i>
                    {{ category_data.category }}
                </h3>
                
                {% for question_data in category_data.questions %}
                <div class="faq-item" data-category="{{ category_key }}">
                    <button class="faq-question flex items-center justify-between" 
                            aria-expanded="false"
                            data-question="{{ question_data.question }}">
                        <span>{{ question_data.question }}</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="faq-answer">
                        {{ question_data.answer | safe }}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </div>
        
        {% if faq.component_settings.contact_cta.show %}
        <div class="faq-cta">
            <div class="cta-content">
                <h3>{{ faq.component_settings.contact_cta.text }}</h3>
                <p>Our Puerto Rico relocation experts are here to help with any questions not covered above.</p>
                <a href="{{ faq.component_settings.contact_cta.button_link }}" 
                   class="btn btn-primary" 
                   data-cta="faq_contact" 
                   data-section="faq">
                   {{ faq.component_settings.contact_cta.button_text }}
                </a>
            </div>
        </div>
        {% endif %}
    </div>
</section>
