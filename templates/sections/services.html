<section class="services" id="services">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Your Complete Relocation Journey</h2>
            <p class="section-subtitle">Professional support at every stage of your Puerto Rico move</p>
        </div>

        <!-- Journey-Based Service Organization -->
        
        <!-- Pre-Arrival Planning Phase -->
        {% if services.pre_arrival_services %}
        <div class="journey-phase" data-phase="pre-arrival">
            <div class="phase-header">
                <div class="phase-icon">
                    <i class="fas fa-search-location"></i>
                </div>
                <div class="phase-info">
                    <h3 class="phase-title">üõ´ Pre-Arrival Planning</h3>
                    <p class="phase-subtitle">Research and prepare before you arrive - plan from anywhere in the world</p>
                </div>
            </div>
            <div class="services-grid grid grid-auto-fit-lg">
                {% for service in services.pre_arrival_services %}
                <div class="service-card flex flex-col items-center" data-service="{{ service.title }}" data-phase="{{ service.phase }}">
                    {% if service.badge %}
                    <span class="service-badge badge-{{ service.phase }}">{{ service.badge }}</span>
                    {% endif %}
                    <div class="service-icon flex items-center justify-center icon-{{ service.icon_color }}">
                        <i class="fas {{ service.icon }}"></i>
                    </div>
                    <h4 class="service-title">{{ service.title }}</h4>
                    <div class="service-pricing">
                        <span class="service-price">{{ service.price }}</span>
                        <span class="service-period">{{ service.price_period }}</span>
                    </div>
                    <p class="service-description">{{ service.description }}</p>
                    <ul class="service-features">
                        {% for feature in service.features %}
                        <li class="flex items-start">{{ feature }}</li>
                        {% endfor %}
                    </ul>
                    <a href="#contact" class="btn btn-outline service-cta" data-cta="service" data-section="services" data-service="{{ service.title }}" data-phase="{{ service.phase }}">{{ service.cta_text }}</a>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Arrival & Setup Phase -->
        {% if services.arrival_setup_services %}
        <div class="journey-phase" data-phase="arrival-setup">
            <div class="phase-header">
                <div class="phase-icon">
                    <i class="fas fa-plane-arrival"></i>
                </div>
                <div class="phase-info">
                    <h3 class="phase-title">üö™ Arrival & Setup</h3>
                    <p class="phase-subtitle">Essential support for your first 30 days - hit the ground running</p>
                </div>
            </div>
            <div class="services-grid grid grid-auto-fit-lg">
                {% for service in services.arrival_setup_services %}
                <div class="service-card flex flex-col items-center" data-service="{{ service.title }}" data-phase="{{ service.phase }}">
                    {% if service.badge %}
                    <span class="service-badge badge-{{ service.phase }}">{{ service.badge }}</span>
                    {% endif %}
                    <div class="service-icon flex items-center justify-center icon-{{ service.icon_color }}">
                        <i class="fas {{ service.icon }}"></i>
                    </div>
                    <h4 class="service-title">{{ service.title }}</h4>
                    <div class="service-pricing">
                        <span class="service-price">{{ service.price }}</span>
                        <span class="service-period">{{ service.price_period }}</span>
                    </div>
                    <p class="service-description">{{ service.description }}</p>
                    <ul class="service-features">
                        {% for feature in service.features %}
                        <li class="flex items-start">{{ feature }}</li>
                        {% endfor %}
                    </ul>
                    <a href="#contact" class="btn btn-outline service-cta" data-cta="service" data-section="services" data-service="{{ service.title }}" data-phase="{{ service.phase }}">{{ service.cta_text }}</a>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Ongoing Support Phase -->
        {% if services.ongoing_support_services %}
        <div class="journey-phase" data-phase="ongoing-support">
            <div class="phase-header">
                <div class="phase-icon">
                    <i class="fas fa-home"></i>
                </div>
                <div class="phase-info">
                    <h3 class="phase-title">üè† Ongoing Support</h3>
                    <p class="phase-subtitle">Long-term property and life management - stay worry-free</p>
                </div>
            </div>
            <div class="services-grid grid grid-auto-fit-lg">
                {% for service in services.ongoing_support_services %}
                <div class="service-card flex flex-col items-center" data-service="{{ service.title }}" data-phase="{{ service.phase }}">
                    {% if service.badge %}
                    <span class="service-badge badge-{{ service.phase }}">{{ service.badge }}</span>
                    {% endif %}
                    <div class="service-icon flex items-center justify-center icon-{{ service.icon_color }}">
                        <i class="fas {{ service.icon }}"></i>
                    </div>
                    <h4 class="service-title">{{ service.title }}</h4>
                    <div class="service-pricing">
                        <span class="service-price">{{ service.price }}</span>
                        <span class="service-period">{{ service.price_period }}</span>
                    </div>
                    <p class="service-description">{{ service.description }}</p>
                    <ul class="service-features">
                        {% for feature in service.features %}
                        <li class="flex items-start">{{ feature }}</li>
                        {% endfor %}
                    </ul>
                    <a href="#contact" class="btn btn-outline service-cta" data-cta="service" data-section="services" data-service="{{ service.title }}" data-phase="{{ service.phase }}">{{ service.cta_text }}</a>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}

        <!-- Service Packages -->
        {% if services.packages %}
        <div class="journey-packages">
            <div class="phase-header">
                <div class="phase-icon">
                    <i class="fas fa-gift"></i>
                </div>
                <div class="phase-info">
                    <h3 class="phase-title">üéØ Complete Journey Packages</h3>
                    <p class="phase-subtitle">Save money with our comprehensive relocation packages</p>
                </div>
            </div>
            <div class="packages-grid grid grid-auto-fit-lg">
                {% for package_id, package in services.packages.items() %}
                <div class="package-card service-card flex flex-col items-center" data-package="{{ package.name }}">
                    {% if package.badge %}
                    <span class="service-badge badge-package">{{ package.badge }}</span>
                    {% endif %}
                    <div class="service-icon flex items-center justify-center icon-package">
                        <i class="fas {{ package.icon }}"></i>
                    </div>
                    <h4 class="service-title">{{ package.name }}</h4>
                    <p class="package-tagline">{{ package.tagline }}</p>
                    <div class="service-pricing">
                        <span class="service-price">{{ package.price }}</span>
                        {% if package.savings %}
                        <span class="service-savings">{{ package.savings }}</span>
                        {% endif %}
                    </div>
                    <p class="service-description">{{ package.description }}</p>
                    <ul class="service-features">
                        {% for include in package.includes %}
                        <li class="flex items-start">{{ include }}</li>
                        {% endfor %}
                    </ul>
                    <div class="package-meta">
                        <span class="package-duration">Duration: {{ package.duration }}</span>
                        <span class="package-ideal">Ideal for: {{ package.ideal_for }}</span>
                    </div>
                    <a href="#contact" class="btn btn-primary service-cta" data-cta="package" data-section="services" data-package="{{ package.name }}">Choose Package</a>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</section>
